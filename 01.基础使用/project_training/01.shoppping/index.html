<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>购物车实例</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div id="app" v-cloak>
  <template v-if="list.length">
    <table>
      <thead>
      <tr>
        <th></th>
        <th>商品名称</th>
        <th>商品单价</th>
        <th>购买数量</th>
        <th>操作</th>
        <th>
          <input type="checkbox"
                 ref="check_all"
                 @change="checkAll"
                 :checked="allChecked">
        </th>
      </tr>
      </thead>
      <tbody>
      <template v-for="(items, pIndex) in list">
        <tr v-for="(item, index) in items">
          <td>{{ pIndex * items.length + index + 1 }}</td>
          <td>{{ item.name }}</td>
          <td>{{ item.price }}</td>
          <td>
            <button
              type="button"
              @click="minus(pIndex, index)"
              :disabled="item.count === 1">-
            </button>
            {{ item.count }}
            <button
              type="button"
              @click="add(pIndex, index)">+
            </button>
          </td>
          <td>
            <button
              type="button"
              @click="remove(pIndex, index)">移除
            </button>
          </td>
          <td>
            <input type="checkbox"
                   @change="checkItem(pIndex, index)"
                   :checked="item.checked">
          </td>
        </tr>
      </template>
      </tbody>
      <tfoot>
      <tr>
        <td>总价</td>
        <td colspan="4">{{totalPrice | number}}</td>
      </tr>
      </tfoot>
    </table>
  </template>
  <div v-else>购物车为空</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>
<script src="index.js"></script>
</body>
</html>
